# 프로젝트 한줄 소개
sopt-makers 소속의 웹 프러덕트 팀(플레이그라운드 팀, 크루 팀, 공식 홈페이지 팀)에서 겪고 있는 이미지 리사이징 문제를 가장 합리적인 비용으로 해결하기 위한, Cloudflare Workers 프로젝트. 

## Getting Started 
### 1. 해당 프로젝트는 only pnpm 프로젝트로, 반드시 pnpm을 설치해주셔야 합니다.
   ```sh
  pnpm install
  ```

<br/>

### 2. 개발 서버 실행
   ```sh
  pnpm dev
  ```

## 🔍 프로젝트 배경
### 1. Next.js 의 Image 태그의 비용 문제 <br/>
Next.js Image 가 제공하는 이미지 리사이징은, 사용하기 가장 편리하지만, 사용할 수 있는 이미지 리사이징 툴 중 가장 비싼 가격을 책정하고 있었기에 사용에 어려움이 있었습니다.
Pro 요금제 결제 시, First 5,000 장까지는 추가 비용 없이 사용 가능하고, 이후로는 이미지 1,000장 당 $5.00의 요금이 발생했습니다. (2024년 10월 기준)

<br />

### 2. 무료 이미지 리사이징 툴의 한계 <br/>
Next.js Image 의 대안으로서 playground 와 crew 팀에서는, wsrv.nl 이라는 무료 이미지 리사이징 툴을 사용하고 있으나, wsrv.nl 에서 간헐적으로 503 에러를 발생시키는 문제가 있었습니다.
이에 playground 팀에서는 알고리즘을 설계하여, 3초 안에 이미지 리사이징 서버로부터 응답이 오지 않을 경우, 이미지 리사이징을 포기하는 식의 휴리스틱한 해결책을 사용하고 있었고,
crew 팀에서는 이미지 리사이징에 실패할 경우에 대비한 해결책이 없어, 이미지 리사이징 에러 발생 시, 해당 이미지가 포함된 모든 컴포넌트가 로딩되지 않는 심각한 문제가 있었습니다.

<br />

### 결론
결국, 최소한의 비용으로 안정적인 이미지 리사이징을 지원할 수 있는 툴의 필요성이 대두되었고, 이를 해결하고자 Cloudflare 의 Images 와 Workers 를 이용하여 자체 이미지 리사이징 툴을 기획하게 되었습니다. 

Cloudflare 의 Images 를 구독하여 사용할 경우, 월 $ 에, First 5,000 은 추가금 없이 리사이징이 가능하며, 이후 1,000번의 request 당 $0.50 의 추가 요금으로 리사이징이 가능하여, Next.js 의 Image 태그의 추가금과 비교했을 때, 약 1/10 의 비용 절감이 가능해집니다. (2024년 10월 기준)

## 📢 사용 방법
여기는 넥제 커스텀 로더 리서치 진행 후 이어서 쓰기~ 
